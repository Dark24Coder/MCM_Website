<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link rel="icon" type="image/svg" href="./assets/images/logo/logomcm.svg" />
    <link rel="stylesheet" href="./assets/css/password/password.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <title>MCM - R√©cup√©ration de mot de passe</title>
</head>
<body>
    <a href="login.html" class="back-to-login">
        ‚Üê Retour √† la connexion
    </a>

    <div class="recovery-container">
        <!-- Left Side - Form -->
        <div class="recovery-form-side">
            <div class="recovery-header">
                <div class="logo-container">
                    <div class="logo">MCM</div>
                    <span class="logo-text">MCM</span>
                </div>
                <h1 class="recovery-title">R√©cup√©ration de mot de passe</h1>
                <p class="recovery-subtitle">Suivez les √©tapes pour r√©cup√©rer votre compte</p>
            </div>

            <!-- Step Indicator -->
            <div class="step-indicator">
                <div class="step active" id="step1">1</div>
                <div class="step" id="step2">2</div>
                <div class="step" id="step3">3</div>
            </div>

            <!-- Messages -->
            <div class="error-message message" id="errorMessage"></div>
            <div class="success-message message" id="successMessage"></div>
            <div class="info-message message" id="infoMessage"></div>

            <!-- Loading -->
            <div class="loading" id="loadingSpinner">
                <div class="spinner"></div>
                <p>Chargement...</p>
            </div>

            <!-- Step 1: Email & Method -->
            <div class="step-section active" id="emailStep">
                <h3>√âtape 1: Identification</h3>
                <p>Saisissez votre adresse email et choisissez comment recevoir votre nouveau mot de passe temporaire</p>
                
                <div class="form-group">
                    <label for="recoveryEmail">Adresse email</label>
                    <input type="email" class="form-control" id="recoveryEmail" 
                            placeholder="johndoe@example.com" required />
                </div>

                <div class="form-group">
                    <label>M√©thode de r√©ception</label>
                    <div class="validation-methods">
                        <div class="validation-method active" id="emailMethod" onclick="selectMethod('email')">
                            üìß Par Email
                        </div>
                        <div class="validation-method" id="smsMethod" onclick="selectMethod('sms')">
                            üì± Par SMS
                        </div>
                    </div>
                </div>

                <div class="form-group" id="phoneGroup" style="display: none;">
                    <label for="recoveryPhone">Num√©ro de t√©l√©phone</label>
                    <input type="tel" class="form-control" id="recoveryPhone" 
                            placeholder="+229 XX XX XX XX XX" />
                </div>

                <button type="button" class="recovery-btn" onclick="sendTemporaryPassword()">
                    <span>Envoyer le mot de passe temporaire</span>
                </button>
            </div>

            <!-- Step 2: Password Sent -->
            <div class="step-section" id="sentStep">
                <h3>√âtape 2: Mot de passe temporaire envoy√©</h3>
                <div class="email-sent-icon" id="sentIcon">üìß</div>
                <p id="sentMessage">Un mot de passe temporaire a √©t√© envoy√© √† votre adresse email.</p>
                
                <div class="info-message message" style="display: block;">
                    <strong>Important :</strong> Ce mot de passe temporaire expire dans 30 minutes. Connectez-vous imm√©diatement et changez-le pour votre s√©curit√©.
                </div>

                <div class="temp-password-display" id="tempPasswordDisplay">
                    <h4>üîë Votre mot de passe temporaire</h4>
                    <div class="temp-password-value" id="tempPasswordValue"></div>
                    <p class="temp-password-note">Copiez ce mot de passe et utilisez-le pour vous connecter</p>
                </div>

                <div class="button-group">
                    <button type="button" class="recovery-btn secondary" onclick="goToStep(1)">
                        <span>Changer de m√©thode</span>
                    </button>
                    <button type="button" class="recovery-btn" onclick="goToLogin()">
                        <span>Aller √† la connexion</span>
                    </button>
                </div>

                <div class="resend-code">
                    <button type="button" id="resendBtn" onclick="sendTemporaryPassword()">
                        Renvoyer le mot de passe
                    </button>
                    <p id="resendTimer"></p>
                </div>
            </div>

            <!-- Step 3: Change Password -->
            <div class="step-section" id="changePasswordStep">
                <h3>√âtape 3: Nouveau mot de passe</h3>
                <p>Cr√©ez votre nouveau mot de passe s√©curis√©</p>
                
                <div class="form-group">
                    <label for="tempPasswordInput">Mot de passe temporaire</label>
                    <div class="password-group">
                        <input type="password" class="form-control" id="tempPasswordInput" 
                                placeholder="Saisissez votre mot de passe temporaire" required />
                        <button type="button" class="password-toggle" onclick="togglePassword('tempPasswordInput')">
                            üëÅ
                        </button>
                    </div>
                </div>

                <div class="form-group">
                    <label for="newPassword">Nouveau mot de passe</label>
                    <div class="password-group">
                        <input type="password" class="form-control" id="newPassword" 
                                placeholder="Minimum 8 caract√®res" required 
                                oninput="checkPasswordStrength()" />
                        <button type="button" class="password-toggle" onclick="togglePassword('newPassword')">
                            üëÅ
                        </button>
                    </div>
                    <div class="password-strength" id="passwordStrength">
                        <div class="strength-indicator">
                            <div class="strength-bar" id="bar1"></div>
                            <div class="strength-bar" id="bar2"></div>
                            <div class="strength-bar" id="bar3"></div>
                            <div class="strength-bar" id="bar4"></div>
                        </div>
                        <div id="strengthText">Entrez un mot de passe</div>
                    </div>
                </div>

                <div class="form-group">
                    <label for="confirmNewPassword">Confirmer le nouveau mot de passe</label>
                    <div class="password-group">
                        <input type="password" class="form-control" id="confirmNewPassword" 
                                placeholder="Retapez votre mot de passe" required />
                        <button type="button" class="password-toggle" onclick="togglePassword('confirmNewPassword')">
                            üëÅ
                        </button>
                    </div>
                </div>

                <button type="button" class="recovery-btn" onclick="changePassword()">
                    <span>Changer le mot de passe</span>
                </button>
            </div>
        </div>

        <!-- Right Side - Carousel -->
        <div class="recovery-carousel-side">
            <div class="carousel-wrapper">
                <div class="carousel-track" id="carouselTrack">
                    <div class="carousel-slide">
                        <img src="./assets/images/holy-communion-concept-with-bible.jpg" alt="MCM Security">
                    </div>
                    <div class="carousel-slide">
                        <img src="./assets/images/holy-communion-concept-with-bible.jpg" alt="MCM Protection">
                    </div>
                    <div class="carousel-slide">
                        <img src="./assets/images/holy-communion-concept-with-bible.jpg" alt="MCM Trust">
                    </div>
                </div>
            </div>
            
            <div class="carousel-overlay"></div>
            
            <div class="carousel-content">
                <div class="carousel-text" id="carouselText">
                    <div class="carousel-icon">üîê</div>
                    <h2 class="carousel-title">R√©cup√©ration s√©curis√©e</h2>
                    <p class="carousel-description">
                        Votre s√©curit√© est notre priorit√©. Suivez les √©tapes pour r√©cup√©rer l'acc√®s √† votre compte en toute s√©curit√©.
                    </p>
                    <div class="carousel-dots" id="carouselDots"></div>
                </div>
            </div>
        </div>
    </div>

    <script src="./assets/js/password/password.js"></script>
</body>
</html>